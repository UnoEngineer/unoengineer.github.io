<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Alex Fernandes">

  
  
  
    
  
  <meta name="description" content="Proximity &amp; BLE">

  
  <link rel="alternate" hreflang="en-us" href="http://unoengineer.com/project/unikey_reader_bluepass/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="http://unoengineer.com/project/unikey_reader_bluepass/">

  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Alex Fernandes">
  <meta property="og:url" content="http://unoengineer.com/project/unikey_reader_bluepass/">
  <meta property="og:title" content="BluePass | Alex Fernandes">
  <meta property="og:description" content="Proximity &amp; BLE"><meta property="og:image" content="http://unoengineer.com/project/unikey_reader_bluepass/featured.jpeg">
  <meta property="twitter:image" content="http://unoengineer.com/project/unikey_reader_bluepass/featured.jpeg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2018-04-27T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2018-04-27T00:00:00&#43;00:00">
  

  


    









<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://unoengineer.com/project/unikey_reader_bluepass/"
  },
  "headline": "BluePass",
  
  "image": [
    "http://unoengineer.com/project/unikey_reader_bluepass/featured.jpeg"
  ],
  
  "datePublished": "2018-04-27T00:00:00Z",
  "dateModified": "2018-04-27T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Alex Fernandes"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Alex Fernandes",
    "logo": {
      "@type": "ImageObject",
      "url": "http://unoengineer.com/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Proximity \u0026 BLE"
}
</script>

  

  


  


  





  <title>BluePass | Alex Fernandes</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Alex Fernandes</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Alex Fernandes</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article article-project">

  




















  
  


<div class="article-container pt-3">
  <h1>BluePass</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Apr 27, 2018
  </span>
  

  

  

  
  
  

  
  

</div>

  













<div class="btn-links mb-3">
  
  








  












  


  
  
    
  
<a class="btn btn-outline-primary my-1 mr-1" href="https://www.youtube.com/watch?v=XUw5R5WIy88&amp;feature=youtu.be" target="_blank" rel="noopener">
  Video
</a>




  
  
  
    
  
  
  
  
  
    
  
  <a class="btn btn-outline-primary my-1 mr-1" href="https://www.linkedin.com/in/unoengineer" target="_blank" rel="noopener">
    <i class="fab fa-linkedin mr-1"></i>
    Connect
  </a>


</div>


</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 250px; max-height: 111px;">
  <div style="position: relative">
    <img src="/project/unikey_reader_bluepass/featured.jpeg" alt="" class="featured-image">
    <span class="article-header-caption">Photo by Linear</span>
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      <p><img src="./Linear-BluePass-Mobile-Credentials.jpeg" alt="jpeg"></p>
<p>BluePass multi-technology readers (Bluetooth and 125 kHz card &amp; Fob compatible) can operate with door controllers that support Wiegand readers. They can be installed using the existing wiring offering a seamless transition from legacy credentials to mobile credentials.</p>
<p>For product info, please visit the 
<a href="https://www.nortekcontrol.com/bluepass/bp.html" target="_blank" rel="noopener">NortekControl</a> website.</p>
<h1 id="product-development">Product Development</h1>
<p>Adding Bluetooth support to the reader was a straightforward process with our existing mobile development kit and web services. On the hardware side, our standard BLE module was redesigned to fit inside the standard &ldquo;Mullion&rdquo; enclosure.</p>
<p>One extra key requirement for the multi-technology reader was being able to support 125 kHz proximity legacy credentials. Although our partners are pushing to move end users to the mobile credential ecosystem, it was required to have support for legacy cards in locations with big legacy deployments.</p>
<h1 id="challenges">Challenges</h1>
<p>Our first protoype used a custom integrated circuit from NXP to read the card data. From a hardware perspective, this approach was ideal due its compact size and low part count requirement. Moreover, the integrated circuit performed demodulation, signal conditioning and analog filtering in a single package.</p>
<p><img src="./sr3_toilet_paper_micro.png" alt="png"></p>
<p>After these preliminary tests, the hardware team came up with a new printed circuit board inspired on the breadboard circuit. In house testing with cards looked promising therefore beta units were assembled for selected customers. After a few weeks of field testing, we learned that some sites were experiencing issues with fobs. Fobs use the same tag transponder chip used in cards but they are typically carried in keyrings.</p>
<p><img src="./fob_card.png" alt="png"></p>
<h1 id="actions">Actions</h1>
<p>Our first hunch was the smaller coil area of the fob might not be inducing enough energy to power the chip tag. Inspecting the induced voltage on the tag chip was not going to be an easy task, therefore we modified the reader side. A simple solution was to increase the coil supply voltage in order to radiate a stronger field. A small increase on reliability was noticed but further testing revealed some negative side effects such as frequency harmonics on the received signal. Field testing showed that overall read range was still not reliable therefore this initiave was abandoned.</p>
<p><img src="./htrc_110_analog_mode.png" alt="png"></p>
<p>Further research revealed an unknown operation mode to monitor the &ldquo;raw analog signal&rdquo; on the proximity decoder. Using an oscilloscope and our firmware decoder, a line was used to trigger the oscilloscope on each syncronization frame. This was a key quality measurement of the received signal that would allow us to benchmark the overall system. Testing fobs showed a weaker signal than the one generated by cards. This was evidence that the coil size did have an impact on the signal amplitude. After some experimentation, a firmware build was put together to alternate the decoder gain while scanning for cards and fobs. This approach solved the issue around the coil size differences but we were still experiencing data decoding errors.</p>
<p><img src="./nxp_datasheet_note.png" alt="png"></p>
<p>Now our attention was turned to the demodulator frequency response. Fobs and cards encode their data using Frequency-shift keying (FSK) modulation with a maximum value of 15.625 kHz. Although the decoder datasheet listed a set of SPI commands to disable all the internal filtering, our tests results did not align with this claim. Later on we found an application note describing a fixed filter &ldquo;with and edge frequency of 15 kHz&rdquo; on the receiver path.</p>
<h1 id="results">Results</h1>
<p>It was clear that we were going to need a new approach to support fob devices. After reviewing several patents and online resources, a pattern emerged from different reader manufacturers. All of them used proprietary designs built with discrete components. This meant that our team would have to design a proximity circuit from scratch.</p>
<p><img src="./Spice_simulator.png" alt="png"></p>
<p>After identifying several hardware implementations, different sections of the hardware receiver circuit were tested with a software circuit simulator. Once a design satisfied our requirements, a printed circuit board was put together in a small carrier board. This board was attached to the existing reader allowing us to fully test the receiver circuit.</p>
<p>A few integration issues came up that required some firmware and hardware changes on the carrier and BLE board. One interesting challegue was induced noise coming from the BLE reader that was within the receiver operational bandwidth. After a tedious process of trial and error, we associated the noise presence to PWM device. The PWM fundamental frequency did not fall within the receiver bandwidth but its first harmonic did. After some minor hardware chages around the PWM and a new set of parameters for the PWM device, the induced noise was gone.</p>
<p>Finally, our reader was able to read fobs and cards with 100% reliability.</p>
<p><img src="./sr3_prox_prototype.JPG" alt="jpg"></p>
<h1 id="marketing-is-calling">Marketing is calling</h1>
<p>ISC West is the largest US security event featuring the latest products from the security industry. One of our partners asked us to come up with an idea to shocase the new Bluetooth reader for the coming exhibition. After some internal brainstorming, the team came up with a fascinating idea: a &ldquo;Bluetooth enabled beer tap&rdquo;.</p>
<p><img src="./NorKeg.jpg" alt="jpg"></p>
<p>Using the reader as a &ldquo;gatekeeper&rdquo; of the beer, visitors were asked to install the mobile app to redeem one cup of beer. The mobile app was loaded with one &ldquo;beer credit&rdquo; which was equivalent to one glass of beer. Redeeming the beer was straightforward, first the visitor had to place the cup under the tap and after presenting the mobile device in front of the reader, beer would start pouring.</p>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/commercial/">Commercial</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=http://unoengineer.com/project/unikey_reader_bluepass/&amp;text=BluePass" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=http://unoengineer.com/project/unikey_reader_bluepass/&amp;t=BluePass" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=BluePass&amp;body=http://unoengineer.com/project/unikey_reader_bluepass/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=http://unoengineer.com/project/unikey_reader_bluepass/&amp;title=BluePass" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=BluePass%20http://unoengineer.com/project/unikey_reader_bluepass/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=http://unoengineer.com/project/unikey_reader_bluepass/&amp;title=BluePass" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu52a603635ecebd45650b162dadabb4e5_12861_270x270_fill_q90_lanczos_center.jpg" alt="Alex Fernandes">
    

    <div class="media-body">
      <h5 class="card-title"><a href="http://unoengineer.com/">Alex Fernandes</a></h5>
      <h6 class="card-subtitle">Embedded Software Engineer</h6>
      <p class="card-text">Experienced in the full-lifecycle development of electronic products</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/unoengineer" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>












  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/project/comtech_cs4400/">Frequency Converter</a></li>
      
      <li><a href="/project/unikey_omniassure/">OmniAssure Touch Reader</a></li>
      
      <li><a href="/project/unikey_pbu/">UniKey PbU Module</a></li>
      
    </ul>
  </div>
  



    <div class="project-related-pages content-widget-hr">
      
      

      
      
      

      
      
      

      
      
      
    </div>
  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
